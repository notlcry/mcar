# æ ‘è“æ´¾4B Whisperæ€§èƒ½æŒ‡å—

## ğŸ¯ æ€§èƒ½è¯„ä¼°

### é€‚åˆä½¿ç”¨Whisperçš„åœºæ™¯ï¼š
âœ… **ç¦»çº¿ç¯å¢ƒ**ï¼šæ— ç½‘ç»œè¿æ¥æ—¶çš„è¯­éŸ³è¯†åˆ«
âœ… **é«˜å‡†ç¡®åº¦éœ€æ±‚**ï¼šéœ€è¦è¯†åˆ«å¤æ‚ä¸­æ–‡æˆ–ä¸“ä¸šè¯æ±‡
âœ… **éå®æ—¶åº”ç”¨**ï¼šå¯ä»¥æ¥å—å‡ ç§’å»¶è¿Ÿçš„åœºæ™¯
âœ… **å®‰é™ç¯å¢ƒ**ï¼šå‡å°‘é‡å¤è¯†åˆ«çš„éœ€æ±‚

### ä¸é€‚åˆä½¿ç”¨Whisperçš„åœºæ™¯ï¼š
âŒ **å®æ—¶å¯¹è¯**ï¼šéœ€è¦å¿«é€Ÿå“åº”çš„è¯­éŸ³äº¤äº’
âŒ **é¢‘ç¹è¯†åˆ«**ï¼šç”¨æˆ·è¿ç»­å‘å‡ºå¤šä¸ªå‘½ä»¤
âŒ **èµ„æºå—é™**ï¼šRAM < 2GBçš„è®¾å¤‡
âŒ **ç”µæ± ä¾›ç”µ**ï¼šéœ€è¦èŠ‚èƒ½çš„ç§»åŠ¨åº”ç”¨

## ğŸ”„ æ··åˆæ–¹æ¡ˆï¼ˆæ¨èï¼‰

### æ™ºèƒ½åˆ‡æ¢ç­–ç•¥ï¼š
1. **é»˜è®¤ä½¿ç”¨PocketSphinx**ï¼šå¿«é€Ÿå“åº”æ—¥å¸¸å‘½ä»¤
2. **ç‰¹æ®Šæƒ…å†µç”¨Whisper**ï¼š
   - è¯†åˆ«å¤±è´¥æ—¶çš„å¤‡é€‰æ–¹æ¡ˆ
   - å¤æ‚è¯­å¥çš„ç²¾ç¡®è¯†åˆ«
   - ç”¨æˆ·ä¸»åŠ¨è¦æ±‚é«˜ç²¾åº¦è¯†åˆ«

### å®ç°æ–¹å¼ï¼š
```python
# ä¼ªä»£ç ç¤ºä¾‹
def smart_recognize(audio):
    # å…ˆç”¨PocketSphinxå¿«é€Ÿè¯†åˆ«
    result = pocketsphinx_recognize(audio)
    
    if result and confidence > 0.8:
        return result  # é«˜ç½®ä¿¡åº¦ï¼Œç›´æ¥è¿”å›
    
    # ä½ç½®ä¿¡åº¦æˆ–è¯†åˆ«å¤±è´¥ï¼Œä½¿ç”¨Whisper
    return whisper_recognize(audio)
```

## âš¡ æ€§èƒ½ä¼˜åŒ–æŠ€å·§

### 1. æ¨¡å‹é€‰æ‹©
- **æ—¥å¸¸ä½¿ç”¨**: Whisper tiny (æœ€å¿«)
- **é‡è¦å¯¹è¯**: Whisper base (å¹³è¡¡)
- **é¿å…ä½¿ç”¨**: smallåŠä»¥ä¸Šæ¨¡å‹

### 2. ç³»ç»Ÿä¼˜åŒ–
```bash
# å¢åŠ äº¤æ¢ç©ºé—´
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# ä¼˜åŒ–CPUæ€§èƒ½
echo performance | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor
```

### 3. éŸ³é¢‘é¢„å¤„ç†
- é™ä½é‡‡æ ·ç‡ï¼š16kHzè€Œä¸æ˜¯44.1kHz
- é™åˆ¶éŸ³é¢‘é•¿åº¦ï¼šæœ€å¤š10ç§’ç‰‡æ®µ
- å™ªéŸ³æŠ‘åˆ¶ï¼šå‡å°‘æ— æ•ˆè¯†åˆ«

## ğŸ“Š å®é™…æµ‹è¯•å»ºè®®

### æµ‹è¯•è„šæœ¬ï¼š
```bash
# æµ‹è¯•Whisperæ€§èƒ½
python3 -c "
import time
import whisper

print('åŠ è½½Whisper tinyæ¨¡å‹...')
start = time.time()
model = whisper.load_model('tiny')
load_time = time.time() - start
print(f'æ¨¡å‹åŠ è½½æ—¶é—´: {load_time:.2f}ç§’')

# åˆ›å»ºæµ‹è¯•éŸ³é¢‘ï¼ˆ5ç§’é™éŸ³ï¼‰
import numpy as np
test_audio = np.zeros(16000 * 5, dtype=np.float32)

print('æµ‹è¯•è¯†åˆ«æ€§èƒ½...')
start = time.time()
result = model.transcribe(test_audio)
recognize_time = time.time() - start
print(f'è¯†åˆ«æ—¶é—´: {recognize_time:.2f}ç§’')
print(f'æ€»ä½“æ€§èƒ½: å¯æ¥å—' if recognize_time < 10 else 'æ€§èƒ½è¾ƒå·®')
"
```

## ğŸ® ç”¨æˆ·ä½“éªŒè®¾è®¡

### 1. æ¸è¿›å¼è¯†åˆ«
```
ç”¨æˆ·è¯´è¯ â†’ PocketSphinxå¿«é€Ÿè¯†åˆ« â†’ æ˜¾ç¤ºåˆæ­¥ç»“æœ
         â†“
      å¦‚æœéœ€è¦ â†’ Whisperç²¾ç¡®è¯†åˆ« â†’ æ›´æ–°æœ€ç»ˆç»“æœ
```

### 2. è§†è§‰åé¦ˆ
- ğŸ¤ **ç›‘å¬ä¸­**: ç»¿è‰²æŒ‡ç¤ºç¯
- â³ **PocketSphinxè¯†åˆ«**: é»„è‰²é—ªçƒ
- ğŸ§  **Whisperå¤„ç†**: è“è‰²æ—‹è½¬åŠ¨ç”»
- âœ… **è¯†åˆ«å®Œæˆ**: æ˜¾ç¤ºç»“æœ

### 3. ç”¨æˆ·æ§åˆ¶
- å¿«é€Ÿæ¨¡å¼ï¼šä»…ä½¿ç”¨PocketSphinx
- ç²¾ç¡®æ¨¡å¼ï¼šä¼˜å…ˆä½¿ç”¨Whisper
- æ™ºèƒ½æ¨¡å¼ï¼šè‡ªåŠ¨é€‰æ‹©æœ€ä½³æ–¹æ¡ˆ

## ğŸ’° æˆæœ¬æ•ˆç›Šåˆ†æ

| æ–¹æ¡ˆ | å“åº”æ—¶é—´ | å‡†ç¡®åº¦ | èµ„æºæ¶ˆè€— | é€‚ç”¨åœºæ™¯ |
|------|----------|--------|----------|----------|
| **ä»…PocketSphinx** | 0.5-1ç§’ | 70-80% | ä½ | æ—¥å¸¸å‘½ä»¤ |
| **ä»…Whisper tiny** | 3-5ç§’ | 85-90% | ä¸­ | ç²¾ç¡®è¯†åˆ« |
| **æ™ºèƒ½æ··åˆ** | 0.5-5ç§’ | 80-90% | ä¸­ | æœ€ä½³å¹³è¡¡ |

## ğŸ”§ å®æ–½å»ºè®®

### é˜¶æ®µ1ï¼šåŸºç¡€åŠŸèƒ½
1. å…ˆå®ç°PocketSphinxç‰ˆæœ¬
2. ç¡®ä¿åŸºç¡€åŠŸèƒ½ç¨³å®š
3. æ”¶é›†ç”¨æˆ·åé¦ˆ

### é˜¶æ®µ2ï¼šWhisperé›†æˆ
1. æ·»åŠ Whisperä½œä¸ºå¯é€‰åŠŸèƒ½
2. å®ç°æ™ºèƒ½åˆ‡æ¢é€»è¾‘
3. æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–

### é˜¶æ®µ3ï¼šç”¨æˆ·å®šåˆ¶
1. æä¾›æ€§èƒ½æ¨¡å¼é€‰æ‹©
2. ä¸ªæ€§åŒ–è¯†åˆ«ç­–ç•¥
3. æŒç»­ä¼˜åŒ–ç®—æ³•

## ğŸ¯ æœ€ç»ˆå»ºè®®

**å¯¹äºä½ çš„æ ‘è“æ´¾4B**ï¼š
1. **ç«‹å³å¯ç”¨**: ä½¿ç”¨PocketSphinxç‰ˆæœ¬ï¼Œå¿«é€Ÿä½“éªŒæ‰€æœ‰åŠŸèƒ½
2. **å¯é€‰å‡çº§**: å®‰è£…Whisper tinyä½œä¸ºå¢å¼ºåŠŸèƒ½
3. **æ™ºèƒ½å¹³è¡¡**: å®ç°æ··åˆè¯†åˆ«ç­–ç•¥

**æ€§èƒ½é¢„æœŸ**ï¼š
- PocketSphinx: å®æ—¶å“åº”ï¼Œä¸­ç­‰å‡†ç¡®åº¦
- Whisper tiny: 3-5ç§’å»¶è¿Ÿï¼Œé«˜å‡†ç¡®åº¦
- æ··åˆæ¨¡å¼: æœ€ä½³ç”¨æˆ·ä½“éªŒ